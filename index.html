<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forex Pip Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #0f4c75 50%, #3282b8 75%, #0f172a 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            padding: 10px;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 48, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 226, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 0;
        }
        
        .calculator-container {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            overflow: hidden;
            position: relative;
        }
        
        .calculator-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #10b981, #3b82f6, #8b5cf6, #ef4444, #f59e0b, #10b981);
            background-size: 200% 100%;
            animation: borderGlow 3s linear infinite;
        }
        
        @keyframes borderGlow {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 0%; }
        }
        
        .header {
            background: linear-gradient(135deg, #1e293b 0%, #0f4c75 50%, #3282b8 100%);
            color: white;
            text-align: center;
            padding: 30px 20px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0;
        }
        
        .input-section {
            padding: 40px;
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
        }
        
        .results-section {
            padding: 40px;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .input-group {
            position: relative;
        }
        
        .input-group label {
            display: block;
            color: #e2e8f0;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .input-group input,
        .input-group select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            color: #e2e8f0;
            appearance: none;
        }
        
        .input-group select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
        }
        
        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #3b82f6;
            background: rgba(15, 23, 42, 0.95);
            box-shadow: 
                0 0 0 3px rgba(59, 130, 246, 0.2),
                0 0 20px rgba(59, 130, 246, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .calculate-btn {
            width: 100%;
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 50%, #8b5cf6 100%);
            background-size: 200% 200%;
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            animation: buttonGradient 3s ease infinite;
        }
        
        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 10px 30px rgba(16, 185, 129, 0.3),
                0 0 20px rgba(59, 130, 246, 0.2);
            animation-duration: 1s;
        }
        
        @keyframes buttonGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .calculate-btn:active {
            transform: translateY(0);
        }
        
        .results {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border-left: 4px solid #10b981;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .results h3 {
            color: #e2e8f0;
            font-size: 1.3rem;
            margin-bottom: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .result-card {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #10b981, #3b82f6, #8b5cf6);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                0 0 20px rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        .result-card:hover::before {
            opacity: 1;
        }
        
        .result-label {
            color: #94a3b8;
            font-weight: 500;
            font-size: 0.9rem;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .result-value {
            color: #e2e8f0;
            font-weight: 700;
            font-size: 1.4rem;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .profit-value {
            color: #10b981;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }
        
        .risk-value {
            color: #ef4444;
            text-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
        }
        
        .info-section {
            margin-top: 30px;
        }
        
        .info-toggle-btn {
            width: 100%;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: #e2e8f0;
        }
        
        .info-toggle-btn:hover {
            background: rgba(15, 23, 42, 0.9);
            border-color: rgba(59, 130, 246, 0.5);
            transform: translateY(-1px);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.2);
        }
        
        .info-toggle-btn.active {
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            color: white;
            border-color: #8b5cf6;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }
        
        .info-icon {
            font-size: 1.2rem;
        }
        
        .info-cards {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 15px;
            animation: slideDown 0.3s ease;
        }
        
        .info-card {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .info-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #10b981);
        }
        
        .info-card h4 {
            color: #60a5fa;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 8px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .info-card p {
            color: #cbd5e1;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .quick-presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .preset-btn {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            color: #e2e8f0;
            position: relative;
            overflow: hidden;
        }
        
        .preset-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .preset-btn:hover {
            border-color: #3b82f6;
            background: rgba(15, 23, 42, 0.9);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.2);
        }
        
        .preset-btn:hover::before {
            left: 100%;
        }
        
        .preset-btn.active {
            background: linear-gradient(135deg, #10b981, #3b82f6);
            color: white;
            border-color: #10b981;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }
        
        /* Desktop Styles */
        @media (min-width: 768px) {
            .main-content {
                grid-template-columns: 1fr 1fr;
            }
            
            .results-section {
                border-top: none;
                border-left: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .input-grid {
                grid-template-columns: 1fr;
                gap: 25px;
            }
            
            .results-grid {
                grid-template-columns: 1fr 1fr;
                gap: 20px;
            }
            
            .info-cards {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
        }
        
        @media (min-width: 1024px) {
            .input-section,
            .results-section {
                padding: 50px;
            }
            
            .results-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        /* Mobile Optimizations */
        @media (max-width: 767px) {
            body {
                padding: 5px;
            }
            
            .container {
                padding: 10px 0;
            }
            
            .header {
                padding: 25px 20px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .input-section,
            .results-section {
                padding: 25px 20px;
            }
            
            .input-row {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .quick-presets {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .result-value {
                font-size: 1.2rem;
            }
            
            .calculate-btn {
                padding: 18px;
                font-size: 1.05rem;
            }
        }
        
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.6rem;
            }
            
            .input-section,
            .results-section {
                padding: 20px 15px;
            }
            
            .results {
                padding: 20px;
            }
            
            .result-card {
                padding: 15px;
            }
        }
        
        /* Loading Animation */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }
        
        .loading .calculate-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid transparent;
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes slideDown {
            0% {
                opacity: 0;
                transform: translateY(-10px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Custom Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 50%, #8b5cf6 100%);
            border-radius: 10px;
            border: 2px solid rgba(15, 23, 42, 0.8);
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #059669 0%, #2563eb 50%, #7c3aed 100%);
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }
        
        ::-webkit-scrollbar-thumb:active {
            background: linear-gradient(135deg, #047857 0%, #1d4ed8 50%, #6d28d9 100%);
        }
        
        /* Firefox Scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: #3b82f6 rgba(15, 23, 42, 0.8);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="calculator-container">
            <div class="header">
                <h1>📊 Forex Pip Calculator</h1>
                <p>Professional position sizing and risk management tool</p>
            </div>
            
            <div class="main-content">
                <div class="input-section">
                    <div class="quick-presets">
                        <button type="button" class="preset-btn" data-preset="conservative">Conservative<br>1:1.5</button>
                        <button type="button" class="preset-btn" data-preset="balanced">Balanced<br>1:2</button>
                        <button type="button" class="preset-btn" data-preset="aggressive">Aggressive<br>1:3</button>
                        <button type="button" class="preset-btn" data-preset="custom">Custom</button>
                    </div>
                    
                    <form id="calculatorForm">
                        <div class="input-grid">
                            <div class="input-group">
                                <label for="currencyPair">Currency Pair</label>
                                <select id="currencyPair" required>
                                    <option value="EURUSD">EUR/USD</option>
                                    <option value="EURJPY">EUR/JPY</option>
                                    <option value="EURGBP">EUR/GBP</option>
                                    <option value="EURAUD">EUR/AUD</option>
                                    <option value="EURCAD">EUR/CAD</option>
                                    <option value="EURCHF">EUR/CHF</option>
                                    <option value="USDJPY">USD/JPY</option>
                                    <option value="USDCHF">USD/CHF</option>
                                    <option value="USDCAD">USD/CAD</option>
                                    <option value="GBPUSD">GBP/USD</option>
                                    <option value="GBPJPY">GBP/JPY</option>
                                    <option value="GBPAUD">GBP/AUD</option>
                                    <option value="GBPCAD">GBP/CAD</option>
                                    <option value="GBPCHF">GBP/CHF</option>
                                    <option value="AUDUSD">AUD/USD</option>
                                    <option value="AUDJPY">AUD/JPY</option>
                                    <option value="AUDCAD">AUD/CAD</option>
                                    <option value="AUDCHF">AUD/CHF</option>
                                    <option value="CADJPY">CAD/JPY</option>
                                    <option value="CADCHF">CAD/CHF</option>
                                    <option value="CHFJPY">CHF/JPY</option>
                                    <option value="NZDUSD">NZD/USD</option>
                                    <option value="NZDJPY">NZD/JPY</option>
                                    <option value="NZDCAD">NZD/CAD</option>
                                    <option value="NZDCHF">NZD/CHF</option>
                                </select>
                            </div>
                            
                            <div class="input-row">
                                <div class="input-group">
                                    <label for="accountBalance">Account Balance ($)</label>
                                    <input type="number" id="accountBalance" step="0.01" min="1" placeholder="10000" required>
                                </div>
                                
                                <div class="input-group">
                                    <label for="riskPercentage">Risk % per Trade</label>
                                    <input type="number" id="riskPercentage" step="0.1" min="0.1" max="10" placeholder="2" required>
                                </div>
                            </div>
                            
                            <div class="input-row">
                                <div class="input-group">
                                    <label for="rrRatio">Risk-Reward Ratio</label>
                                    <input type="number" id="rrRatio" step="0.1" min="0.1" placeholder="2.0" required>
                                </div>
                                
                                <div class="input-group">
                                    <label for="riskPips">Stop Loss (Pips)</label>
                                    <input type="number" id="riskPips" step="0.1" min="0.1" placeholder="20" required>
                                </div>
                            </div>
                            
                            <div class="input-row">
                                <div class="input-group">
                                    <label for="entryPrice">Entry Price</label>
                                    <input type="number" id="entryPrice" step="0.00001" min="0" placeholder="1.1000">
                                </div>
                                
                                <div class="input-group">
                                    <label for="tradeDirection">Trade Direction</label>
                                    <select id="tradeDirection">
                                        <option value="long">Long (Buy)</option>
                                        <option value="short">Short (Sell)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="calculate-btn">
                            <span class="btn-text">Calculate Position</span>
                        </button>
                    </form>
                </div>
                
                <div class="results-section">
                    <div id="results" class="results">
                        <h3>📈 Position Details</h3>
                        
                        <div class="results-grid">
                            <div class="result-card">
                                <div class="result-label">Position Size</div>
                                <div class="result-value" id="lotSize">-</div>
                            </div>
                            
                            <div class="result-card">
                                <div class="result-label">Risk Amount</div>
                                <div class="result-value risk-value" id="riskAmount">-</div>
                            </div>
                            
                            <div class="result-card">
                                <div class="result-label">Target Profit</div>
                                <div class="result-value profit-value" id="targetAmount">-</div>
                            </div>
                            
                            <div class="result-card">
                                <div class="result-label">Take Profit (Pips)</div>
                                <div class="result-value" id="targetPips">-</div>
                            </div>
                            
                            <div class="result-card">
                                <div class="result-label">Pip Value</div>
                                <div class="result-value" id="pipValue">-</div>
                            </div>
                            
                            <div class="result-card">
                                <div class="result-label">Stop Loss Price</div>
                                <div class="result-value" id="stopLossPrice">-</div>
                            </div>
                            
                            <div class="result-card">
                                <div class="result-label">Take Profit Price</div>
                                <div class="result-value" id="takeProfitPrice">-</div>
                            </div>
                            
                            <div class="result-card">
                                <div class="result-label">Position Value</div>
                                <div class="result-value" id="positionValue">-</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <button type="button" class="info-toggle-btn" id="infoToggle">
                            <span class="info-icon">ℹ️</span>
                            <span class="info-text">Tips & Guide</span>
                        </button>
                        
                        <div class="info-cards" id="infoCards" style="display: none;">
                            <div class="info-card">
                                <h4>💡 Risk Management</h4>
                                <p>Never risk more than 1-3% of your account per trade. This calculator helps you maintain proper position sizing based on your risk tolerance.</p>
                            </div>
                            
                            <div class="info-card">
                                <h4>📊 How to Use</h4>
                                <p>Select your currency pair, enter your account details, set your risk percentage, and define your stop loss. The calculator will determine optimal position size.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Currency pair pip values and decimal places
        const currencyData = {
            'EURUSD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'EURJPY': { pipValue: 10, decimals: 2, pipSize: 0.01 },
            'EURGBP': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'EURAUD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'EURCAD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'EURCHF': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'USDJPY': { pipValue: 10, decimals: 2, pipSize: 0.01 },
            'USDCHF': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'USDCAD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'GBPUSD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'GBPJPY': { pipValue: 10, decimals: 2, pipSize: 0.01 },
            'GBPAUD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'GBPCAD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'GBPCHF': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'AUDUSD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'AUDJPY': { pipValue: 10, decimals: 2, pipSize: 0.01 },
            'AUDCAD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'AUDCHF': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'CADJPY': { pipValue: 10, decimals: 2, pipSize: 0.01 },
            'CADCHF': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'CHFJPY': { pipValue: 10, decimals: 2, pipSize: 0.01 },
            'NZDUSD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'NZDJPY': { pipValue: 10, decimals: 2, pipSize: 0.01 },
            'NZDCAD': { pipValue: 10, decimals: 4, pipSize: 0.0001 },
            'NZDCHF': { pipValue: 10, decimals: 4, pipSize: 0.0001 }
        };

        // Preset configurations
        const presets = {
            conservative: { rrRatio: 1.5, riskPercentage: 1 },
            balanced: { rrRatio: 2, riskPercentage: 2 },
            aggressive: { rrRatio: 3, riskPercentage: 3 },
            custom: {}
        };

        // Initialize preset buttons
        document.querySelectorAll('.preset-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active class from all buttons
                document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
                // Add active class to clicked button
                this.classList.add('active');
                
                const preset = presets[this.dataset.preset];
                if (preset.rrRatio) {
                    document.getElementById('rrRatio').value = preset.rrRatio;
                }
                if (preset.riskPercentage) {
                    document.getElementById('riskPercentage').value = preset.riskPercentage;
                }
            });
        });

        // Set default preset
        document.querySelector('[data-preset="balanced"]').classList.add('active');

        document.getElementById('calculatorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Add loading state
            const form = this;
            const btn = form.querySelector('.calculate-btn');
            const btnText = btn.querySelector('.btn-text');
            
            form.classList.add('loading');
            btnText.textContent = 'Calculating...';
            
            // Simulate calculation delay for better UX
            setTimeout(() => {
                calculatePosition();
                form.classList.remove('loading');
                btnText.textContent = 'Calculate Position';
            }, 500);
        });

        function calculatePosition() {
            // Get input values
            const currencyPair = document.getElementById('currencyPair').value;
            const accountBalance = parseFloat(document.getElementById('accountBalance').value);
            const riskPercentage = parseFloat(document.getElementById('riskPercentage').value);
            const rrRatio = parseFloat(document.getElementById('rrRatio').value);
            const riskPips = parseFloat(document.getElementById('riskPips').value);
            const entryPrice = parseFloat(document.getElementById('entryPrice').value) || 0;
            const tradeDirection = document.getElementById('tradeDirection').value;
            
            // Validate inputs
            if (!accountBalance || !riskPercentage || !rrRatio || !riskPips || 
                accountBalance <= 0 || riskPercentage <= 0 || rrRatio <= 0 || riskPips <= 0) {
                alert('Please enter valid positive numbers for all required fields.');
                return;
            }

            if (riskPercentage > 10) {
                alert('Warning: Risking more than 10% per trade is extremely dangerous!');
            }
            
            // Get currency data
            const currency = currencyData[currencyPair];
            
            // Calculate risk amount based on account balance and risk percentage
            const riskAmount = (accountBalance * riskPercentage) / 100;
            
            // Calculate pip value for the position
            const pipValue = riskAmount / riskPips;
            
            // Calculate lot size (1 standard lot = $10 per pip for major pairs)
            const lotSize = pipValue / currency.pipValue;
            
            // Calculate target pips and amount
            const targetPips = riskPips * rrRatio;
            const targetAmount = riskAmount * rrRatio;
            
            // Calculate position value (lot size * 100,000 for standard lots)
            const positionValue = lotSize * 100000;
            
            // Calculate stop loss and take profit prices if entry price is provided
            let stopLossPrice = 0;
            let takeProfitPrice = 0;
            
            if (entryPrice > 0) {
                const pipSizeInPrice = currency.pipSize;
                
                if (tradeDirection === 'long') {
                    stopLossPrice = entryPrice - (riskPips * pipSizeInPrice);
                    takeProfitPrice = entryPrice + (targetPips * pipSizeInPrice);
                } else {
                    stopLossPrice = entryPrice + (riskPips * pipSizeInPrice);
                    takeProfitPrice = entryPrice - (targetPips * pipSizeInPrice);
                }
            }
            
            // Display results
            document.getElementById('lotSize').textContent = formatLotSize(lotSize);
            document.getElementById('riskAmount').textContent = '$' + riskAmount.toFixed(2);
            document.getElementById('targetAmount').textContent = '$' + targetAmount.toFixed(2);
            document.getElementById('targetPips').textContent = targetPips.toFixed(1) + ' pips';
            document.getElementById('pipValue').textContent = '$' + pipValue.toFixed(2);
            document.getElementById('positionValue').textContent = '$' + positionValue.toLocaleString();
            
            if (entryPrice > 0) {
                document.getElementById('stopLossPrice').textContent = stopLossPrice.toFixed(currency.decimals);
                document.getElementById('takeProfitPrice').textContent = takeProfitPrice.toFixed(currency.decimals);
            } else {
                document.getElementById('stopLossPrice').textContent = 'Enter price';
                document.getElementById('takeProfitPrice').textContent = 'Enter price';
            }
            
            // Show results with animation
            const resultsSection = document.getElementById('results');
            resultsSection.style.opacity = '0';
            resultsSection.style.transform = 'translateY(20px)';
            resultsSection.style.display = 'block';
            
            // Animate in
            setTimeout(() => {
                resultsSection.style.transition = 'all 0.5s ease';
                resultsSection.style.opacity = '1';
                resultsSection.style.transform = 'translateY(0)';
            }, 50);
        }

        function formatLotSize(lotSize) {
            return lotSize.toFixed(2) + ' lots';
        }

        // Real-time calculation on input change
        const inputs = document.querySelectorAll('input, select');
        inputs.forEach(input => {
            input.addEventListener('input', function() {
                // Clear results when inputs change
                const resultsSection = document.getElementById('results');
                if (resultsSection.style.display === 'block') {
                    resultsSection.style.opacity = '0.5';
                }
                
                // Auto-calculate if all required fields are filled
                const form = document.getElementById('calculatorForm');
                const requiredInputs = form.querySelectorAll('input[required], select[required]');
                let allFilled = true;
                
                requiredInputs.forEach(input => {
                    if (!input.value || input.value <= 0) {
                        allFilled = false;
                    }
                });
                
                if (allFilled) {
                    // Debounce the calculation
                    clearTimeout(window.calcTimeout);
                    window.calcTimeout = setTimeout(() => {
                        calculatePosition();
                    }, 1000);
                }
            });
        });

        // Initialize with default values
        document.getElementById('accountBalance').value = '10000';
        document.getElementById('riskPercentage').value = '2';
        document.getElementById('rrRatio').value = '2';
        document.getElementById('riskPips').value = '20';
        document.getElementById('entryPrice').value = '1.1000';

        // Auto-calculate on page load
        setTimeout(() => {
            calculatePosition();
        }, 1000);

        // Info toggle functionality
        document.getElementById('infoToggle').addEventListener('click', function() {
            const infoCards = document.getElementById('infoCards');
            const isVisible = infoCards.style.display !== 'none';
            
            if (isVisible) {
                infoCards.style.display = 'none';
                this.classList.remove('active');
                this.querySelector('.info-text').textContent = 'Tips & Guide';
            } else {
                infoCards.style.display = 'grid';
                this.classList.add('active');
                this.querySelector('.info-text').textContent = 'Hide Tips';
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'981cabcdc63ea48b',t:'MTc1ODMyMjUzMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
